#                                   项目概述

## 伙伴匹配系统

### 1、项目是如何开展的？如何做的

- 需求分析

  项目的背景以及项目的定位。明确项目的目标，即希望通过这个项目实现根据用户自身的标签去匹配相似用户，组建队伍的功能。接着扩展开来，根据接口文档，将项目划分为用户模块，队伍模块，贴文模块，消息模块、关注管理模块。

- 技术选型

  vue3+vite+vant

- 主页设计

  首先是进行主页设计，同时也是参考了一下app的界面，确定界面布局，从上到下是导航条、搜索框、信息流、底部固定导航栏。

  配置路由

- 前后端联调

  在完成主页的布局之后，进前后端联调

- 移动端的适配

  引入flexible.js，修改index.html

- 其他界面设计

  根据功能的重要性，底部导航分成四部分：主页、队伍、消息、个人中心。然后根据确定好的底部导航信息，划分模块实现，结合每个模块的接口文档，进行界面设计。

- 完成整体功能需求实现

  对一些重复使用的组件进行抽离，例如单元格组件Cell、卡片组件Card等，后续复用

  抽离公共变量以及一些占据大篇幅的常量

- 检查功能或者优化代码

​      强制登录，自动跳转到登录页面，利用axios全局配置请求和响应拦截器

​      解决头导航栏定死的问题

- 部署上线

  打包项目，利用宝塔面板部署上线

  

### 2、项目难点

- websocket实现聊天功能

- 移动端适配

  移动端项目需要较高的高还原性，适配各种设备

  

### 3、项目亮点

- 组件二次封装

### 4、业务

（1） basicLayout 头部导航条

根据前置路由守卫判断跳转的路由是否属于有title字段，显示导航栏名字，对于聊天，新建贴文模块，设置hidden的路径，隐藏底部的导航栏。下部导航栏有一个tab中有to字段可以设置你需要跳转的路由

（2）登录页面：发送请求，成功后会返回数据token，利用sessionStroage存储token,

form表单校验规则用rules：validator

（3）注册页面：手机号验证码校验，设置账号和密码，利用form表单，首先是校验手机号是否符合规范格式，是否有效，用rules规则进行校验，利用节流思想，当点击发送验证码时，当信息发送成功时，首先获取按钮的DOM，修改DOM内部的文字innnerHTML，倒数60秒，当秒数减少为0时，文字显示重新发送，清空定时器。最后提交表单

（4）首页：List 初始化后会触发一次 load 事件，用于加载第一屏的数据，这个特性可以通过 `immediate-check` 属性关闭。此时就不用把获取用户和列表分别通onMounted()进行数据加载，分页获取数据，currentpage当前页数作为参数进行传参，

（5）首页tab切换，利用tab身上的change方法，而且tab身上有一个active属性，tab栏切换可以收集到这个切换栏的值，根据这个值进行数据请求，同时在数据加载中，当组件滚动到底部时，会触发List组件的 `load` 事件并将 `loading` 设置成 `true`。此时可以发起异步操作并更新数据，数据更新完毕后，将 `loading` 设置成 `false` 。当没有数据是，直接设置finined为true。同时利用PullRefresh 组件进行下拉刷新操作，利用其身上的refresh方法，在每次下拉刷新时，清空当前的数据列表，重新发送请求获取数据，在数据获取完毕，设置refreshing为false。

(6) 解散队伍和加入私密队伍是有弹出对话框的，首先点击加入队伍，会先将team.status传过去，判断这个队伍是否公开或者私密，如果是私有的就弹出输入密码的对话框，当用户输入密码，点击确认才发送请求去请求加入队伍，对话框的显示与隐藏交给一个变量来维护，

解散队伍思路一致，当解散队伍后，需要重新调用refresh进行刷新。



（7）用户中心：当用户进入用户中心，在onMounted()中先判断是否存在当前用户，存在则获取当前用户信息，并将用户id用localStroge存储起来，便于后续使用。若无当前用户则跳转至登录页面。

（8）用户更新：刚开始，利用id获取当前用户，从localstroage中获取用户，toedit(更改的项名称，中文名，以及当前值)，利用query传参方式传递给另一个页面，回显数据到另一个修改页面，editmessage页面，当更新邮箱（没有格式校验）或者手机号，需要添加插槽，增加验证环节，提交修改信息时需要传入当前用户ID以及修改的值。



（9）对于更新图像则不用，文件上传完毕后会触发 `after-read` 回调函数，获取到对应的 `file` 对象。（上传图片前可以用beforeread函数校验图片格式等等），文件上传步骤，文件用form-data格式，首先创建一个form-data对象，  let formData = new FormData();，接着将获取到的上传图片的file对象添加到formdata对象中，formData.append("file", fileList.value[0].file)，接着发送请求上传图片，请求成功后把data中的图片地址放入页面的image位置。最后清空与uploader绑定的fileList的值。

（10）修改标签：`main-active-index` 表示左侧高亮选项的索引，`active-id` 表示右侧高亮选项的 id。利用/user/tags接口获取当前用户的标签信息，并将其赋值给右侧高亮标签。首先从pickerMessage（自定义的选择器）中把每一类中的信息合并在一起，利用flatMap，展开数据项，接着通过filter结合map过滤出与搜索栏相同的标签，如果存在就添加到已选标签列。如果要取消某个标签点击关闭，利用filter过滤掉关闭的这些标签。

（11）修改密码：首先分成三个页面，输入手机号，获取验证码，重新设置密码，其中利用三个变量来维护页面的切换，用true与false表示显示与隐藏，手机验证页面，需要先设置手机号，然后点击确定，确认之后发送请求给后端，看看这个手机号是否注册了，注册了就返回用户的username给前端，接着设置当前页隐藏，开启验证码输入页面，后端立即发送验证码，用户输入验证码后，就发起请求，传递phone和验证码参数给后端，后端验证验证码正确与否，若正确，前端设置当前页面隐藏，设置密码页面开启，最后输入密码进行设置，密码输入完毕后，最后发起请求，参数是手机号，验证码，以及密码。成功后跳转至用户中心页面。

(12)关注用户：用户身上有一个字段是isFollow，表示是否关注，空值关注与已关注的显隐切换。

（13）vant组件的上传图片组件upload是维护一个filelistl列表{ url: 'https://cloud-image', isImage: true }存储图片的信息，









## OJ判题系统





### 项目性能优化

- 首屏加载速度

  （1）异步引入js代码

  （2）利用构建压缩，tree-shaking

  （3）gzip

- 体验优化

  骨架屏、兜底图片





